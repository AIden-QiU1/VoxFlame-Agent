# 构音障碍人士急需功能规划

> 规划日期: 2026-01-30
> 目标: 1-2 天内快速实现的核心功能

## 核心痛点分析

### 1. 语音识别问题
- **问题**: 发音不清导致 ASR 识别率低
- **影响**: 需要多次重复，增加沟通成本
- **优先级**: P0

### 2. 表达效率问题
- **问题**: 说话费力，需要更快捷的表达方式
- **影响**: 无法快速传达意图
- **优先级**: P0

### 3. 特定场景困难
- **问题**: 医疗、紧急等场景表达困难
- **影响**: 生活质量和安全性
- **优先级**: P0

---

## 功能规划 (按优先级)

### P0: 快捷指令面板 (1天可实现)

**功能描述**:
- 预设常用短语/指令，点击即可播放
- 支持用户自定义添加个人常用语
- 分类显示：日常问候、医疗需求、紧急求助等

**技术实现**:
```
Frontend: 新建 QuickCommands 组件
Backend: API 保存/读取用户自定义短语
Storage: Supabase user_settings 表
```

**UI 设计**:
```
┌─────────────────────────────────────┐
│  🚀 常用短语                         │
├─────────────────────────────────────┤
│  💬 日常                             │
│  [你好] [谢谢] [不需要] [慢一点]     │
│                                      │
│  🏥 医疗                             │
│  [我难受] [需要帮助] [想喝水]        │
│  [上洗手间] [吃药时间]               │
│                                      │
│  🆘 紧急                             │
│  [救命] [叫医生] [联系家人]          │
│                                      │
│  ➕ 添加自定义短语                   │
└─────────────────────────────────────┘
```

**文件清单**:
1. `frontend/src/components/QuickCommands.tsx` - 快捷指令组件
2. `backend/src/routes/commands.ts` - 指令 CRUD API
3. `backend/migrations/quick_commands.sql` - 数据库表

---

### P0: LLM 纠错增强 (0.5天)

**功能描述**:
- 优化 LLM Prompt，针对构音障碍特点
- 使用上下文推断纠错
- 降低 temperature 提高稳定性

**技术实现**:
```python
# ten_agent/extension_src/llm_correction_python/extension.py
PROMPT_DYSARTHRIC = """
你是一位专门帮助构音障碍人士的语音纠错助手。
用户可能有发音不清、吐字困难的情况。

请根据上下文推断用户的真实意图：
- 如果是日常问候，纠正为标准问候语
- 如果是医疗需求，优先考虑健康相关词汇
- 如果是紧急情况，优先识别求助类词汇

只输出纠正后的文本，不要解释。
"""
```

---

### P1: 说话模式切换 (0.5天)

**功能描述**:
- 添加"耐心模式"：延长 VAD 等待时间
- 添加"快速模式"：缩短等待，适合短句
- 用户可自主切换

**技术实现**:
```typescript
// Frontend UI
<select value={mode} onChange={setMode}>
  <option value="patient">耐心模式 (适合长句)</option>
  <option value="normal">正常模式</option>
  <option value="quick">快速模式 (适合短句)</option>
</select>
```

---

## 实施计划

### Day 1: 快捷指令面板
- [ ] 创建 Supabase quick_commands 表
- [ ] 实现后端 CRUD API
- [ ] 前端组件开发
- [ ] 集成到主页面
- [ ] 测试

### Day 2: 纠错增强 + 模式切换
- [ ] 优化 LLM Prompt
- [ ] 实现模式切换 UI
- [ ] VAD 参数动态调整
- [ ] 测试验证

---

## 预期效果

| 功能 | 用户价值 | 实现难度 |
|------|----------|----------|
| 快捷指令面板 | 减少说话次数，快速表达常用意图 | 中 |
| LLM 纠错增强 | 提高识别准确率，降低重复次数 | 低 |
| 说话模式切换 | 适应不同场景需求 | 低 |

---

## 后续扩展

- 语音快捷指令 (特定手势/语音触发)
- 自定义 TTS 音色
- 多语言支持
- 离线模式 (PWA)
