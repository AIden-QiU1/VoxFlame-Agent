# ğŸ”¥ VoxFlame LLM è¯­éŸ³çº é”™å¼€å‘è®¡åˆ’

> **ç›®æ ‡**: ä¸ºæ„éŸ³éšœç¢æ‚£è€…æä¾›å®æ—¶è¯­éŸ³çº é”™åŠŸèƒ½ï¼Œå°†è¯†åˆ«çš„è¯­éŸ³è½¬æ¢ä¸ºæ¸…æ™°ã€æ­£ç¡®çš„æ–‡å­—å’Œè¯­éŸ³è¾“å‡ºã€‚
> **å…³é”®ç‚¹**: åªè¾“å‡ºçº é”™åçš„æœ€ç»ˆç»“æœï¼Œæ— éœ€å±•ç¤ºä¸­é—´è¿‡ç¨‹ã€‚

---

## ğŸ“š ç ”ç©¶è°ƒç ”æ€»ç»“

### 1. æ ¸å¿ƒè®ºæ–‡ä¸æ–¹æ³•

#### ğŸ”¥ 2025å¹´æœ€æ–°ç ”ç©¶

| è®ºæ–‡ | ä¼šè®®/æœŸåˆŠ | æ ¸å¿ƒæ–¹æ³• | WERæ”¹è¿› |
|------|----------|---------|---------|
| **Bridging ASR and LLMs for Dysarthric Speech** | Interspeech 2025 | ASR + LLMè§£ç å™¨é›†æˆ (Whisper-Vicuna) | **WER 0.21** (TORGO) |
| **GAN + LLM Error Correction** | Advanced Intelligent Systems 2025 | GANæ•°æ®å¢å¼º + LLMçº é”™ | ç»¼åˆæå‡ 15% |
| **Generative Error Correction (GER)** | EMNLP 2025 | Task-Activating Prompting | ä¸­æ–‡ASRçº é”™ |

#### ğŸ“– å…³é”®å‘ç°

1. **LLMå¢å¼ºè§£ç ä¼˜äºåå¤„ç†**
   - ä¼ ç»Ÿ: `ASR â†’ æ–‡æœ¬ â†’ LLMåå¤„ç†`
   - æ–°æ–¹æ³•: `ASRç¼–ç å™¨ â†’ LLMè§£ç å™¨` (ç«¯åˆ°ç«¯)
   - Whisper-Vicuna: WER ä» 0.38 é™è‡³ 0.21 (45%â†“)

2. **N-besté‡æ’åºæœ‰æ•ˆ**ï¼ˆé€‚ç”¨äºæ”¯æŒN-bestçš„ASRï¼‰
   - **Paraformer-large** é€šè¿‡ FunASR æ”¯æŒ beam search è§£ç 
   - å¯é…ç½® `beam_size` è·å–å¤šå€™é€‰
   - WERç›¸å¯¹é™ä½ 10-15%

3. **åˆ†å±‚çº é”™ç­–ç•¥**
   ```
   Level 1: å­—ç¬¦çº§çº é”™ (åŒéŸ³å­—)
   Level 2: è¯çº§çº é”™ (è¯æ±‡åˆç†æ€§)
   Level 3: è¯­ä¹‰çº§çº é”™ (ä¸Šä¸‹æ–‡ç†è§£)
   ```

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„è®¾è®¡

### æ ¸å¿ƒæµç¨‹
```
éº¦å…‹é£ â†’ ASRè¯†åˆ« â†’ LLMçº é”™ â†’ åªè¾“å‡ºçº é”™åçš„æ–‡å­— + TTSæ’­æ”¾
```

### è¯¦ç»†æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VoxFlame è¯­éŸ³çº é”™æµç¨‹                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [éº¦å…‹é£] â”€â”€â†’ [WebSocket] â”€â”€â†’ [é˜¿é‡Œäº‘ ASR]                       â”‚
â”‚                                    â”‚                            â”‚
â”‚                                    â–¼                            â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                          â”‚  ASR åŸå§‹æ–‡æœ¬   â”‚                    â”‚
â”‚                          â”‚ (å†…éƒ¨å¤„ç†)      â”‚                    â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                   â”‚                             â”‚
â”‚                                   â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               LLM çº é”™æ‰©å±• (llm_correction_python)         â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  è¾“å…¥: ASRæ–‡æœ¬ + ç”¨æˆ·é…ç½® + å¯¹è¯å†å²                       â”‚  â”‚
â”‚  â”‚                     â”‚                                     â”‚  â”‚
â”‚  â”‚                     â–¼                                     â”‚  â”‚
â”‚  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚  â”‚
â”‚  â”‚           â”‚   é€šä¹‰åƒé—® çº é”™     â”‚                         â”‚  â”‚
â”‚  â”‚           â”‚   æµå¼è¾“å‡º          â”‚                         â”‚  â”‚
â”‚  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚  â”‚
â”‚  â”‚                      â”‚                                    â”‚  â”‚
â”‚  â”‚                      â–¼                                    â”‚  â”‚
â”‚  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚  â”‚
â”‚  â”‚           â”‚   çº é”™åæ–‡æœ¬        â”‚                         â”‚  â”‚
â”‚  â”‚           â”‚  "æˆ‘æƒ³å–æ°´"         â”‚                         â”‚  â”‚
â”‚  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚                             â”‚
â”‚                                   â–¼                             â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                     â–¼                           â–¼               â”‚
â”‚               [å®æ—¶å­—å¹•æ˜¾ç¤º]              [TTSè¯­éŸ³æ’­æ”¾]          â”‚
â”‚               (çº é”™åçš„æ–‡å­—)              (çº é”™åçš„è¯­éŸ³)          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ³¨æ„**: 
- åªå±•ç¤º**æœ€ç»ˆçº é”™ç»“æœ**
- ä¸éœ€è¦å•ç‹¬çš„çº é”™é¡µé¢
- åœ¨ç°æœ‰å¯¹è¯ç•Œé¢ä¸­æ˜¾ç¤ºçº é”™åçš„æ–‡å­—

---

## ğŸ”¬ æ ¸å¿ƒæŠ€æœ¯å®ç°

### çº é”™ Prompt è®¾è®¡

```python
CORRECTION_PROMPT = """ä½ æ˜¯ä¸“ä¸šçš„è¯­éŸ³çº é”™åŠ©æ‰‹ï¼Œå¸®åŠ©æ„éŸ³éšœç¢æ‚£è€…çº æ­£è¯­éŸ³è¯†åˆ«é”™è¯¯ã€‚

## ç”¨æˆ·ä¿¡æ¯
{user_profile}

## ä»»åŠ¡
æ ¹æ®ä»¥ä¸‹è¯­éŸ³è¯†åˆ«ç»“æœï¼Œæ¨æ–­ç”¨æˆ·çœŸå®æ„å›¾å¹¶è¾“å‡ºçº æ­£åçš„æ–‡æœ¬ã€‚

### ASRè¯†åˆ«ç»“æœ
{asr_text}

### å¯¹è¯ä¸Šä¸‹æ–‡
{context}

## è¦æ±‚
1. åˆ†æå¯èƒ½çš„å‘éŸ³æ··æ·†ï¼ˆå¦‚ï¼šz/zh, s/sh, l/n, an/angï¼‰
2. ç»“åˆä¸Šä¸‹æ–‡æ¨æ–­è¯­ä¹‰
3. å‚è€ƒç”¨æˆ·å¸¸ç”¨è¯æ±‡
4. ç›´æ¥è¾“å‡ºçº æ­£åçš„æ–‡æœ¬ï¼Œä¸è¦è§£é‡Š

çº æ­£ç»“æœ:"""
```

### æµå¼è¾“å‡ºå®ç°

```python
class LLMCorrectionExtension(AsyncExtension):
    """LLMçº é”™æ‰©å±• - TEN Framework"""
    
    async def on_data(self, ten_env: AsyncTenEnv, data: Data):
        """æ¥æ”¶ASRç»“æœï¼Œè¿›è¡Œçº é”™"""
        if data.get_name() == "asr_result":
            asr_text = data.get_property_string("text")
            is_final = data.get_property_bool("is_final")
            
            if is_final:
                # åªå¯¹æœ€ç»ˆç»“æœè¿›è¡Œçº é”™
                corrected = await self._correct_text(asr_text)
                
                # å‘é€çº é”™ç»“æœç»™å‰ç«¯å’ŒTTS
                await self._send_corrected_text(ten_env, corrected)
    
    async def _correct_text(self, text: str) -> str:
        """è°ƒç”¨LLMè¿›è¡Œçº é”™"""
        prompt = self._build_prompt(text)
        
        # æµå¼ç”Ÿæˆ
        result = ""
        async for chunk in self.llm.generate_stream(prompt):
            result += chunk
            # å¯é€‰: å®æ—¶æ¨é€ä¸­é—´ç»“æœ
        
        return result.strip()
```

---

## ğŸ“‹ å¼€å‘é˜¶æ®µè®¡åˆ’

### Phase 1: åŸºç¡€çº é”™æ‰©å±• (1å‘¨)

**ç›®æ ‡**: å®ç° ASR â†’ LLMçº é”™ â†’ è¾“å‡º çš„åŸºæœ¬æµç¨‹

#### ä»»åŠ¡æ¸…å•
- [ ] åˆ›å»º `llm_correction_python` TEN æ‰©å±•
- [ ] å®ç°çº é”™ Prompt æ¨¡æ¿
- [ ] é›†æˆé€šä¹‰åƒé—® API 
- [ ] ä¿®æ”¹æ•°æ®æµè¿æ¥
- [ ] å‰ç«¯æ˜¾ç¤ºçº é”™åæ–‡æœ¬

#### æ‰©å±•ç›®å½•ç»“æ„
```
ten_packages/extension/llm_correction_python/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ addon.py
â”œâ”€â”€ extension.py          # ä¸»é€»è¾‘
â”œâ”€â”€ corrector.py          # çº é”™ç®—æ³•
â”œâ”€â”€ config.py
â”œâ”€â”€ manifest.json
â”œâ”€â”€ property.json
â””â”€â”€ requirements.txt
```

#### TEN Graph é…ç½®
```json
{
  "nodes": [
    {"name": "websocket_server", ...},
    {"name": "stt", "addon": "aliyun_asr_bigmodel_python"},
    {"name": "corrector", "addon": "llm_correction_python"},  // æ–°å¢
    {"name": "tts", "addon": "cosy_tts_python"}
  ],
  "connections": [
    {"extension": "stt", "data": [
      {"name": "asr_result", "dest": [{"extension": "corrector"}]}
    ]},
    {"extension": "corrector", "data": [
      {"name": "corrected_text", "dest": [{"extension": "tts"}]}
    ]}
  ]
}
```

### Phase 2: ä¸ªæ€§åŒ–çº é”™ (1å‘¨)

- [ ] ç”¨æˆ·å¸¸ç”¨è¯æ±‡åº“
- [ ] å¯¹è¯å†å²ä¸Šä¸‹æ–‡
- [ ] ç”¨æˆ·å‘éŸ³æ¨¡å¼å­¦ä¹ 

### Phase 3: é«˜çº§çº é”™ (å¯é€‰)

- [ ] N-besté‡æ’åº (éœ€è¦åˆ‡æ¢åˆ°æ”¯æŒN-bestçš„ASR)
- [ ] åˆ†å±‚çº é”™ç­–ç•¥
- [ ] ç”¨æˆ·åé¦ˆå­¦ä¹ 

---

## ğŸ“Š è¯„ä¼°æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ |
|------|------|
| WER (è¯é”™è¯¯ç‡) | < 20% |
| çº é”™å‡†ç¡®ç‡ | > 85% |
| ç«¯åˆ°ç«¯å»¶è¿Ÿ | < 2s |
| ç”¨æˆ·æ»¡æ„åº¦ | > 4/5 |

---

## ğŸ”— å‚è€ƒèµ„æº

### è®ºæ–‡
1. [Bridging ASR and LLMs for Dysarthric Speech](https://arxiv.org/abs/2508.08027) - Interspeech 2025
2. [Zero-shot MLLM for Dysarthric ASR](https://arxiv.org/abs/2406.00639) - Interspeech 2024

### N-best æ”¯æŒæƒ…å†µ

| ASRæ¨¡å‹ | N-bestæ”¯æŒ |
|---------|-----------|
| Paraformer-realtime (é˜¿é‡Œäº‘äº‘æœåŠ¡) | âŒ ä¸æ”¯æŒ |
| Paraformer-large (FunASRæœ¬åœ°) | âœ… æ”¯æŒ (beam_sizeå‚æ•°) |
| Whisper | âœ… æ”¯æŒ (éœ€ä¿®æ”¹ä»£ç ) |
| Azure/Google Speech | âœ… APIåŸç”Ÿæ”¯æŒ |

---

## ğŸ“ å˜æ›´æ—¥å¿—

- **2025-01-10**: åˆå§‹ç‰ˆæœ¬
- **2025-01-10**: ç®€åŒ–éœ€æ±‚ - åªè¾“å‡ºçº é”™ç»“æœï¼Œæ— éœ€ä¸“é—¨é¡µé¢
